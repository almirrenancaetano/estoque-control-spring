<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${user.id == null} ? 'Novo usuário' : 'Editar usuário'"></title>

    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            crossorigin="anonymous"
    >
</head>
<body>

<nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">Sistema de Estoque</a>
        <span class="navbar-text">
            <a href="/logout" class="link-light text-decoration-none">Sair</a>
        </span>
    </div>
</nav>

<div class="container mt-4">

    <h2 th:text="${user.id == null} ? 'Novo usuário' : 'Editar usuário'"></h2>
    <hr>

    <form th:action="@{/users}" th:object="${user}" method="post" class="mt-3">

        <input type="hidden" th:field="*{id}"/>

        <div class="mb-3">
            <label class="form-label">Usuário</label>
            <input type="text" th:field="*{username}" class="form-control" required>
        </div>

        <div class="mb-3">
            <label class="form-label">
                Senha
                <small th:if="${user.id != null}" class="text-muted">
                    (deixe em branco para manter a mesma)
                </small>
            </label>
            <input type="password" th:field="*{password}" class="form-control"
                   th:attr="required=${user.id == null}">
        </div>

        <div class="mb-3">
            <label class="form-label">Perfil</label>
            <select th:field="*{role}" class="form-select">
                <option value="ROLE_USER">Usuário</option>
                <option value="ROLE_ADMIN">Administrador</option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary">Salvar</button>
        <a href="/users" class="btn btn-secondary">Cancelar</a>

    </form>

</div>

<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"
></script>

</body>
</html>
